# 里程碑与规划（Roadmap）

## M0：可运行最小闭环（1–2 天）

- 工作流雏形：初始化工作流（world → characters → style → outline）
- 章节工作流：context → plan → draft → finalize（不含复杂修订）
- 本地存储：`data/` + `outputs/` 基础落盘
- CLI 脚本：可指定章节索引生成与打印结果

验收：能够基于简短 seed 生成 1–2 章连续正文，保存蓝图与产物。

## M1：一致性与记忆（3–5 天）

- 记忆库：摘要/设定/角色状态条目化；基本检索接口
- 一致性检查：风格/设定/角色校验评分与修订回路（阈值 + 次数上限）
- 提示模板：风格指南模板与章节模板固化

验收：多章生成仍能保持主要设定与风格一致，评分低时自动修订。

## M2：可观测与人在环（2–4 天）

- 日志追踪：runId/stepId 打点、耗时/错误明细
- 审阅点：大纲/章节梗概/终稿可挂起等待人工批准
- 快照：关键节点输出固化 + 历史回滚

验收：支持暂停-审阅-恢复流程，出错可快速定位与回退。

## M3：并行与策略（3–5 天）

- `.parallel()`：多视角片段并行生成 + 合成
- `.branch()`：按上下文质量/风格偏差路由不同修正策略
- 提升召回：多路检索与查询改写

验收：大纲复杂处仍能稳定推进，生成质量更稳。

## M4：部署与扩展（3–5 天）

- Serverless API：Hono + `@mastra/deployer`
- 向量库接入：替换 MemoryProvider 为 Pinecone/pgvector（可选）
- 课程化/演示：准备示例数据与示例剧本

验收：可通过 API 触发与监控；记忆检索可替换后端。

