# xiaoshuo_1
基于提示工程的长篇小说自动创作流程
AI小说创作多智能体工作流设计
大型语言模型在长篇内容创作中会遇到连贯性和一致性的挑战，需要分阶段规划和协作来保持质量
aclanthology.org
opencredo.com
。下面设计两套工作流，以多Agent协同方式完成小说创作的初始化和章节生成主流程。每个节点描述其目标、输入、输出以及可能涉及的智能体职责。
工作流1：小说初始化流程
**目标：**在开始正式写作前，生成完整的小说蓝图，包括世界观设定、主要角色档案、文风指南以及情节大纲，为后续章节创作做好准备。这一阶段由多个专职Agent协同完成，每个Agent负责不同侧重的子任务
blog.csdn.net
。
核心概念与世界观设定
**目标：**明确小说的核心创意（主题/梗概）并建立整体世界观，包括故事发生的时代、地点、社会背景和规则等。
**输入：**用户提供的初始创意或题材方向（例如类型、主题句、背景设定草案）作为出发点。
输出：经过提炼的故事核心梗概（logline），描述小说的基本冲突和看点，以及世界观设定文档，涵盖故事宇宙的背景架构（历史、地理、种族设定等）
aclanthology.org
。这为后续角色和情节设计提供统一的设定基础。
Agent职责：“设定生成器”Agent负责整合用户创意，产出精炼的故事前提和世界观说明；若初始设定不明确，可由头脑风暴Agent生成多个备选概念供筛选。
角色档案生成
**目标：**创建主要角色的详细档案，确保角色形象鲜明、动机明确，并为故事发展提供角色驱动力。
**输入：**世界观设定和核心梗概（从步骤1输出），以及用户偏好的角色类型或数量建议。
输出：每个主要角色的角色档案，包括姓名、年龄外貌，背景故事，性格特点，能力技能，以及在剧情中的目标和冲突。角色档案应与世界观相符且彼此关系清晰，形成角色间关系网。
Agent职责：“角色策划师”Agent根据世界观为角色赋予适当背景和性格；“角色一致性检查者”Agent核对角色设定之间是否矛盾，确保角色集合的合理性和多样性。如有需要，可引入审阅Agent微调角色细节以符合预期。
文风与风格指南制定
目标：确定小说的整体叙事风格和语气，建立文风指南以确保各章节的写作基调一致
opencredo.com
。这包括人称视角、叙述节奏、用词风格以及目标读者定位等。
**输入：**已确定的故事梗概、世界观和角色资料，以及用户偏好的文风描述（例如“幽默诙谐的第一人称”或参考某著名作家的风格）。
**输出：**风格指南文档，明确小说的叙事视角（如第一人称/第三人称）、时态运用，整体语调（如严肃、轻松、讽刺等）和修辞偏好，并给出示例段落供参考。该指南将作为后续写作时的风格参考，防止模型输出风格前后不一致。
Agent职责：“文风定制Agent”负责根据输入制定风格说明；“文风检查者”Agent在后续创作中对照该指南审核章节文本，确保用词语气符合既定风格，如有偏差则提出修改建议。
故事大纲结构规划
**目标：**产出完整的剧情大纲，包含主要情节走向和章节划分，保证故事结构清晰、节奏合理，为逐章写作提供指南。
**输入：**前面步骤生成的梗概、世界观、角色档案和风格指南，以及用户期望的篇幅或章节数量（如果有）。
**输出：**情节大纲，以章节为单位列出主要事件和冲突走向。大纲应描述每章的核心事件、涉及的主要角色及情节目的，体现故事的起承转合。这样的大纲相当于故事“事件图”，为后续逐章创作提供了路线图
arxiv.org
。
Agent职责：“大纲策划师”Agent根据梗概扩展出剧情主线和分支情节，安排到各章节并确保衔接合理
arxiv.org
；同时“连贯性审阅Agent”核查大纲内角色出场和事件发展是否与设定一致，避免出现设定冲突或剧情硬伤。必要时，用户监控可以审阅并调节大纲，以符合创作意图。
**逻辑依赖：**工作流1各步骤通常按序进行：世界观和核心设定确定故事方向，之后角色和风格在该方向上展开，最终情节大纲整合前面所有要素形成蓝本。这些初始化产出将作为“记忆”供后续章节写作时引用
blog.csdn.net
。完成初始化后，系统进入章节写作循环。
工作流2：章节写作流程
**目标：**基于初始化阶段产出的蓝图，反复迭代生成小说各章节内容。通过智能体协作，在保证上下文连贯、文风一致、情节合理推进的同时，实现持续创作，支持长期连载的小说生成。
上下文提取与理解
**目标：**在开始撰写新章节前，提取当前所需的上下文信息，确保模型“记得”之前发生的关键情节和角色状态，以保持连续性。
输入：小说的全局信息（世界观设定、角色档案、风格指南）以及已完成章节的摘要或关键事件列表。系统维护一个长程记忆库，存储前文章节的摘要和重要细节。
输出：针对当前待写章节的上下文摘要，包含与本章情节相关的背景信息、前情提要（上章结尾状态）以及需重复出现的伏笔或要素
arxiv.org
。这个摘要经过智能体处理，压缩了大量历史，仅保留与当前章节最相关的人物与事件
arxiv.org
。例如，使用上一章的摘要、涉及的角色最新状态等构成写作参考。
blog.csdn.net
Agent职责：“上下文管理Agent”负责检索长程记忆库，调用章节摘要模型提炼出适合当前章节的背景提示
blog.csdn.net
；该Agent运用类似“记忆宫殿”策略按层次组织信息（如提取大纲层次的事件和角色摘要）
blog.csdn.net
。另外，“协调者Agent”将动态压缩历史内容，只保留与当前章节相关的要点，以避免上下文窗口过载
arxiv.org
。
章节梗概生成与策划
目标：为当前章节生成详细的章节梗概（场景计划），明确本章的具体走向，确保符合全局大纲并衔接上一章结尾。
**输入：**全局剧情大纲中当前章节的概要（来自初始化的大纲）、以及步骤1提取的上下文摘要（前情提要和当前剧情目标）。
输出：当前章节的具体场景计划，通常以要点或段落形式描述本章将发生的主要事件顺序。例如：“第5章梗概：角色A发现线索X -> 角色B出现阻挠 -> 二人冲突升级导致…(本章悬念)”。梗概应注明涉及的角色、地点和事件细节，并与整体情节走向一致，允许在后续文本创作时有清晰的指导
arxiv.org
。
Agent职责：“章节策划师”Agent根据全局大纲和当前上下文，细化出本章剧情要点
arxiv.org
。该Agent会确保先前伏笔在本章适当展开、角色行为符合设定，并为下章留下悬念。生成梗概后，由“一致性审核Agent”检查梗概是否与全局剧情及设定相符（例如某角色不应出场却在梗概中出现，则需修正）。用户也可在此节点介入微调梗概内容。
章节正文写作
目标：依据章节梗概和指导信息，自动生成当章的完整小说正文，语言风格与之前保持一致，情节生动连贯。
**输入：**章节梗概（步骤2输出）、上下文摘要（步骤1输出，包括风格指南、角色设定片段等融合而成的提示）。这些将共同作为大型语言模型的提示，指导其生成章节内容。
输出：当前章节的初稿文本，字数和风格符合要求（例如每章约4000字，延续前文语调）。正文应涵盖梗概中规划的所有事件，衔接上章结尾并引出下章悬念，保持人物言行与既有设定一致。
Agent职责：“章节写手Agent”（ChapterWriter）负责调用语言模型，根据提示生成章节初稿
blog.csdn.net
。它具备“上下文感知”能力，充分利用提示中的剧情和风格信息进行创作。生成过程中可能调用“对话代理”来模拟角色对话，或调用“描写代理”丰富环境描写，从而提高文本的生动性和细节品质。整个写作过程在编排Agent（Orchestrator）的监督下进行，以便在必要时分段生成、减少遗忘或重复。
连续性校验与记忆更新
**目标：**检查并维护剧情和风格的一致性，将本章重要信息并入长期记忆，以支持后续章节创作。
**输入：**本章初稿文本、既有的角色档案和情节记忆库（更新前），以及文风指南。
输出：可能经过修正的章节最终稿（如果初稿存在不一致之处则修订），以及更新后的记忆库记录。本章的摘要（提炼出的主要事件、角色新变化）也生成并存储，以供下一章提取使用
blog.csdn.net
。
Agent职责：“连续性监察Agent”将通读本章初稿，核对其中人物行为、世界设定是否与前文一致，情节衔接是否合理。例如检测人物称谓/口吻是否前后统一，事件因果是否符合逻辑。如发现问题，可触发反馈修正子流程对文本进行修改，然后再评估直到通过
blog.csdn.net
。与此同时，“风格检查Agent”对照风格指南，确保叙事口吻保持统一。经过校验后，“记忆管理Agent”提取本章新增的设定和情节要点，将其向量化嵌入并存入向量数据库或知识库，实现长程记忆更新
freecodecamp.org
。这种机制赋予AI类似“记忆”的能力，方便后续章节检索关键信息
freecodecamp.org
。例如，若本章某角色觉醒了新能力，则将此信息存入角色档案并在摘要中记录，以便后续章节引用。
迭代下一章节
**目标：**判断小说是否完结，若未完结则继续下一章节的创作循环；支持长期连载创作并可在人机协作下调整走向。
**流程：**由主控Orchestrator或调度逻辑检查大纲是否还有未完成章节，或根据剧情发展决定是否需要新增章节/修改大纲。如果故事尚未结束，则利用更新后的全局信息进入下一章流程（返回步骤1），提取最新上下文，生成下章梗概，进入写作循环。如此反复，章节逐步累积直至故事完结。整个过程中可根据需要由用户或编辑介入，调整大纲走向或修改已生成文本，然后继续自动生成后续内容。
Agent职责：“流程协调Agent”（Orchestrator）在每轮结束时评估小说进度，决定是结束还是继续
blog.csdn.net
。如果继续，它会将上一章的收尾作为下一章的开端上下文传递，触发上下文提取Agent开启新一轮创作。该Agent还能根据质量评估策略决定是否在下一轮引入额外反馈。例如，如果上一章质量评分不高，可能要求在下一章开头适当重述关键点或调整叙事策略，以逐步提升整体质量
blog.csdn.net
。
特点：工作流2通过循环迭代机制，实现小说的自动连载创作，每一章都基于前文记忆和全局大纲，保证了情节的连贯推进和伏笔呼应
arxiv.org
。同时，多智能体分工让系统在各环节自动监控质量：上下文管理确保长程一致，风格检查保证文笔统一，连续性校验避免情节“人设崩塌”。整个过程可长期持续，必要时人类创作者可以介入调整方向，再由AI继续高效创作后续章节。通过这种模块化分工与反馈循环，AI小说创作系统能够产出结构完整、风格统一且情节连贯的长篇故事
aclanthology.org
freecodecamp.org
。