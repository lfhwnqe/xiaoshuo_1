# xiaoshuo_1
基于提示工程的长篇小说自动创作流程
可行性分析

您提出的**“故事背景→主要人物→故事大纲→章节梗概→逐章写作并记录情节→生成下一章梗概→撰写下一章”的流程在理论上是可行的。这种循序渐进、多轮提示的策略实际上符合许多AI辅助写作的最佳实践。例如，有实验使用GPT-4在没有人工干预的情况下，通过一系列结构化提示完成了一部长篇小说（12章、约115页），证明单次提示无法完成整本书，但分步骤提供结构化提示可以让模型逐步完成大型创作任务
medium.com
。该项目的关键在于将小说创作拆解为多个阶段**，由模型依次生成：先高层次大纲，再细节大纲，接着各章节草稿，最后扩展完善**
medium.com
。这种迭代细化 (iterative refinement)** 的方法让LLM每次关注有限的范围，降低了上下文遗忘和内容失控的风险。

当然，在实践中需要注意以下几点：

上下文窗口限制： 长篇小说包含海量信息，LLM无法记住此前所有细节。如果每次生成新章节时都把整本书输入，会超出模型上下文长度。因此，必须设计记忆机制来提取和提供“需要记住的重要信息”给模型，包括世界观设定、人物关系，以及前文情节摘要。这一点很重要，因为大型语言模型容易“记得顺序信息但难以随机访问细节”
promptengineering.org
。换言之，模型善于顺着文本往下写，但如果不提醒，它可能遗忘前面某些设定或细节。因此，您的流程需要在章节之间传递关键信息，例如通过摘要和连续性笔记来弥补模型的遗忘。

风格和连贯性： 模型可能在长篇生成过程中跑偏写作风格，或者引入未曾交代的情节元素（这会让读者感到情节有漏洞）。实际案例显示，AI生成长篇时偶尔会提及尚未正式介绍的事物（如角色突然知道某个尚未揭示的信息），令读者感觉错过了内容
medium.com
。为避免此类剧情Bug，需要在整个流程中贯彻统一的写作风格指南，并反复检查前后文呼应。提示词模板+记忆的策略可以做到这一点：每次生成时都向模型重申风格要求，并提供必要的背景记忆，使其不至于自说自话。

人工干预 vs. 全自动： 您提到希望流程可以全自动执行，但也能依据需要介入调整。这是合理的。完全自动化是可能的，但目前让AI毫无监督地写超长篇仍有风险。比较好的做法是在人机协作：由AI执行繁重的生成，在关键节点由人审核或调整（例如修改人物设定、调整大纲、修正不合理剧情）。这个流程可以被设计成默认自动执行，但在每一步都留有人工检查/编辑的接口，以确保输出质量。

综上，您的基本设想完全可行，但需要在信息存储与调用、风格统一、情节一致性上做规范化设计。下面我们将您的思路抽象成一个标准化的工作流，确保流程可持续推进且产出高质量、一致连贯的小说内容。

标准化小说创作工作流

下面是一个可行的LLM长篇小说创作工作流，包含各阶段的步骤说明。此流程强调前期准备充分、循环迭代创作、及时更新记忆，并结合Git版本管理以保证项目的有序推进。

1. 创建故事设定文档（世界观与人物设定）

首先，建立故事设定的基础文档，为后续写作提供稳定的背景参考。这一步尽可能详尽，充当模型的“圣经”和记忆库：

故事背景/世界观（background.md）： 描述小说的时代背景、地理环境、社会结构、世界观设定等。尽量包含丰富的细节：例如世界的历史演变、文化风俗、政治势力、魔法或科技设定等
reddit.com
。这些内容构成故事发生的大环境，让模型始终明确“故事在哪种世界中发生”。

主要人物档案（characters.md）： 罗列主要角色的档案，包括主角和重要配角、反派等。对每个角色给出详细背景（外貌、性格、能力）、人物关系、动机和弧光（人物成长线）等要素
reddit.com
reddit.com
。如果有很多角色，可按类别组织（主角、主要配角、反派等）。角色档案有助于模型在写作时保持角色言行一致，不偏离设定。

风格与笔调指南（style-guide.md，可选）： 定义小说的目标风格和读者定位。例如人称视角（第一人称还是第三人称）、叙事语气（诙谐幽默或严肃紧张）、目标读者（网络爽文风格、古风文言、青少年科幻等等）。列出写作约定（如“保持口语化对白”“每章结尾制造悬念”）。这个指南在每次提示时都可以作为系统信息提供给模型，以锁定叙事风格的统一。

上述文档建议采用Markdown或JSON格式撰写并保存在Git仓库中，以便版本管理。例如：

novel-project/
├── background.md      # 世界观和背景设定
├── characters.md      # 人物设定档案
└── style-guide.md     # 写作风格指南（如有）


在准备这些文档时，可以借助LLM来丰富细节。例如，您可以提示模型：“根据我提供的创意，生成本小说的世界设定，包括地理环境、历史背景、政治势力和文化等细节。” 模型生成后，您再人工修改润色，确保设定新颖且符合您的初衷。同样，可以要求模型基于背景设定生成角色列表和详细档案
reddit.com
。务必对模型起的名字、设定进行审校，必要时手动调整以避免俗套或重复
reddit.com
（很多AI拟的名字可能欠缺多样性，需要您替换为更独特的名字）。

2. 制定故事整体大纲（Plot Outline）

有了背景和人物素材，下一步是绘制小说的情节蓝图。这包括总体走向和分章安排：

主线剧情梗概： 先写出小说的核心剧情走向（几句话概括开端、发展、高潮、结局）。明确小说的主题和主旨，主角的目标与冲突，故事的基调等。

章节划分和概要： 拟定小说的分卷/章节结构。列出每一章的标题（或编号）和该章的主要剧情要点。一种方法是先按照“三幕八章”或“起承转合”设计章节，再细化到每章。例如：“第1章引子：介绍主角背景和冒险契机。第2章冲突：主角踏上旅途遇到第一次挑战...”，一直到结局。如果计划长篇连载，章节可能比较多，可以先按故事的大情节划分若干部分(Arc)或卷，再细分章节。

情节关键节点： 在大纲中标出关键剧情节点（例如重要转折、高潮、悬念点），以及各主要角色的出场章节和成长线。确保大纲涵盖主角和主要配角各自的故事弧光，避免中途角色动机迷失或情节松散
reddit.com
。例如，注明：“第10章主角从低谷崛起”、“第15章揭示幕后反派真相”等节点。

如何生成大纲： 您可以直接让模型基于背景和人物设定来生成初步的大纲。例如提示：「请根据以下背景和角色，拟定20章的小说大纲，包括每章概要。【背景】...【角色】...」。模型输出的大纲您再做修改补充。引用案例： 有人让GPT-4生成包含章节列表和每章摘要的高层次大纲
medium.com
（模型会列出章节题目和简短概要），这一步非常类似于您所设想的第3和第4步。得到初版大纲后，可以根据需要增删章节、调整顺序，使之更符合您的构思。

大纲完成后，将其保存为文件（例如outline.md）到仓库里。大纲是动态文档，后续可能随创作进展而更新调整，这一点我们稍后详述
medium.com
。项目当前结构可能如下：

novel-project/
├── background.md
├── characters.md
├── style-guide.md
└── outline.md        # 故事大纲（章节列表及简要情节）

3. 分章节迭代创作 (Chapter-by-Chapter Iterative Writing)

现在进入核心的章节写作循环。每一章的创作遵循读取上下文→生成章梗概→撰写章节正文→更新存档的流程。具体步骤如下：

3.1 准备上下文信息 – 在为每章生成内容前，先组装本章所需的上下文提示，确保模型“知道”目前的剧情位置和必要信息。上下文通常包括：

固定设定： 故事背景、主要人物档案、风格指南等静态信息（可从之前准备的background.md、characters.md、style-guide.md中提取要点）。这些内容保证模型输出符合既定世界规则和人设，保持风格统一。

剧情进展摘要： 使用一个**“故事到目前为止”的摘要，概括在前面章节中发生的重要事件，以及当前章节开写时剧情所处的状态。如：“上一章中，主角A击败刺客但身受重伤，好友B发现了隐藏线索...”。这个摘要可以每章手动撰写，或请模型根据前几章内容自动生成。持续更新的剧情摘要能帮助模型理解上下文，避免出现前后矛盾。例如，有实践者让GPT在每场景写完后记录“Continuity Notes”，以便后续章节参考
medium.com
。这些连续性笔记**只需保留关键细节，如人物关系变化、flag和伏笔、已出现的重要道具等。

当前章节计划/目标： 明确告诉模型这一章要实现的剧情目的是什么。通常来自大纲中对本章的概要，但可能需要结合前情做更新。如果之前大纲此章计划发生X，但前文剧情有改动，可在这里修正说明。比如：“本章目标：主角从昏迷中苏醒，踏上新的旅程，并遇到未来的盟友。” 给模型一个章节目标，有助于引导生成内容不偏题。

将以上信息组合成提示词。在Claude等支持长上下文的模型中，可以构造成一个系统或用户提示，内容包括：故事背景摘要 + 主要角色设定摘要 + 上文剧情摘要 + 本章写作指令。务必控制提示长度，抓取关键点即可，冗长的设定可以压缩或省略无关细节，以节省token。

3.2 生成章节梗概 (Chapter Outline) – 在撰写章节正文前，建议先让模型产出该章的详细梗概或情节分段（相当于微纲要）。这一步类似您提出的第7点“生成新的章节梗概”。具体做法：

提示模型根据前述上下文，写出本章的分场景提纲或要点列表。例如提示：「依据以上信息，列出第5章的详细情节要点。」 模型理想的输出是一系列步骤或场景描述，说明本章将如何展开。例如：“1) 主角苏醒并处理伤口。2) 与好友B讨论线索，决定启程。3) 路遇强盗引发打斗，展示主角新能力。4) 结尾伏笔：黑暗中一双眼睛注视着他们离去……”。这种章节梗概能起到双重作用：一是让您快速校对剧情走向是否合理、有无偏差；二是给模型明确的写作路线，防止跑题或过度发挥。正如有实践者所说，GPT模型有时会跳跃情节，提前写到后面内容，提前列出场景可约束其不越界
medium.com
（通过先生成开场和收尾场景，再填充中间的技巧来“框住”剧情发展）。

人工审阅/调整 (可选)： 查看模型给出的章梗概，检查是否符合主线意图。如果有不妥之处，可以手动修改，或通过对话要求模型调整细节。比如梗概里出现违背角色性格的行为，您可以指出并让模型修正。在多人协作或您希望深度把控情节时，这一步也可由作者自己撰写梗概，再让模型润色补充。

3.3 撰写章节正文 – 有了章节梗概之后，就可以让模型生成本章的完整文本。此处采用逐章单独提示的方式，而不要在一个持续对话线程中写完整本书。这是因为章节越多，对话越长，模型越可能遗忘早期内容或风格走样；相反，每章单独提问能确保提示里塞入所需的信息且不超长
reddit.com
。实现方法：

新对话会话： 每当开始写新章节，在Claude或ChatGPT中开启一个新会话（或新API调用），将第3.1步骤准备的上下文和第3.2的章节梗概一起作为提示输入模型。这样模型只需关注本章相关的内容，避免上下文窗口被之前冗长对话占据
reddit.com
。这一技巧在社区实践中被证明有效，可以“重置”模型注意力又不失连续性。

提示撰写： 提示中明确要求模型“根据提供的梗概和设定，写出第X章的正文”。例如：「请按照以下梗概撰写第5章的小说正文，要求剧情连贯、文笔符合风格指南，章节结尾自然转入下一章悬念。梗概：...」同时重申一些必要要求：如章节字数（如果有特定长度要求，可以提示“章节目标字数约3000字”但也别太死板，以免模型硬插不自然的内容凑字数）、视角、人称等。由于有风格指南在前，模型应当遵循其中的叙事语气和用词偏好。

模型生成正文： 模型将根据提示输出完整的章节文本。理想的章节应包含起承转合，承接上章并为下章埋下伏笔（很多网络小说喜欢章末留下悬念吊读者胃口）。如果提示得当，模型通常会比较顺畅地生成章节内容，并且遵循梗概的结构，使剧情发展符合预期。

3.4 质量检查与润色 (可选人工审核)： 每章生成后，务必进行审阅，不论由AI还是人来执行，目的是保证章节质量和剧情无硬伤。重点检查：

情节连贯性： 是否与前文一致？有无角色突然转变或失忆、设定冲突？如果发现前后矛盾，可以尝试在反馈中指出让模型修改。例如：“在第4章里主角不知道X的信息，但本章开头却表现他知道，这是矛盾的，请修正。” 或手动编辑文本修复bug。

风格一致性： 文字表达是否符合预期风格？是否出现跑题的抒情、风格转变或不适合目标读者的内容？比如突然出现不合时宜的现代用语、或者语气变了。如果有，可能需要在风格指南中追加说明，并让模型重写段落。风格上的细微调整人工做会更高效，例如统一用词、调整句式等，以确保整篇小说读起来风格前后一致。

文学性与逻辑： 除了技术上的一致，也留意小说的可读性。对话是否符合人物个性？冲突是否合理？需要的话，可以在这一章定稿前进行局部润色。您可以将章节文本再丢给模型，要求“对语言润色但不改变剧情”，或自行修改提高文采。注意保持术语一致（这可以借助模型生成的术语表或名称表来检查），例如魔法咒语、地名人名拼写前后一致等。

经过检查和必要的修改，确认本章文本满意后，将其保存到项目仓库（例如chapters/chapter05.md）。每章保存时，可以打一个Git提交标签，如chap5 first draft。如果后续修改，再commit版本，以便将来回溯变更。

3.5 更新持续性记忆 – 当前章节定稿后，需要及时更新我们的“记忆库”，为下一章创作做好准备：

更新故事摘要： 扩充**“故事到目前为止”的摘要，加入本章的主要事件和结果。保持摘要简明但涵盖关键转折。例如：“在第5章中，主角学会新剑术，结识了盟友C，但也得罪了当地领主，引出新的危机。” 这个累计摘要在后续章节会反复用到。不过注意，摘要会越来越长，需要不时压缩**。您可以每隔几章用模型总结一下目前剧情，用更短篇幅概括，以腾出上下文空间。

连续性笔记/知识库： 将本章产生的新人物、新名词、设定变化等记录在连续性笔记（如continuity_notes.md）中
medium.com
。例如，新出场的配角信息，主角获得了某神器，这些都写进去。下次提示时，可将这些笔记内容（或其中相关部分）并入提示，让模型不忘记已经发生的事实。注意笔记不要无限膨胀，每次只保留重要信息。正如实践经验所示，连续性笔记如果太长也需要让模型总结归纳
medium.com
。可以维护一个列表，每条记录一两句话说明一个事实，并在需要时删掉过时信息（比如某反派已死亡，就不需要再强调他威胁）。

更新大纲（如需）： 如果本章剧情有偏离原定大纲或者新增了剧情支线，及时修改outline.md以反映最新故事走向
medium.com
。例如，模型在第5章引入了一个意料之外的新角色，但您觉得这个角色很精彩决定保留，那么需要把此角色加入人物表，并调整后续大纲安排他的剧情。反过来，如果某章节删减了一些原计划情节，也同步调整大纲以避免遗留无用的伏笔。定期修订大纲，可以确保后续创作有据可依且不犯前后矛盾的错误，这类似于人类作者在创作过程中不断完善提纲的做法
medium.com
。

更新角色状态： 如果这一章中有角色阵亡、关系改变或成长（例如从学徒晋升为骑士），也相应修改characters.md中的描述，或在笔记里注明当前状态。这保证后续章节模型不会把死去的人物写“活”过来，或者忘记人物的成长。

维护索引/术语表 (可选)： 随着章节增多，您可以让模型协助维护一个索引(Index) 或术语表(Glossary) 文件
reddit.com
。例如索引列出所有登场角色、地名、重要道具，并注明首次出现的章节；术语表则定义特有名词（如魔法咒语、架空语言词汇）的含义。这些文件更新频率可以较低，比如每5章更新一次。它们的作用是在需要快速查找某个细节时，您或模型都可参考，降低遗忘出错概率
reddit.com
。在Claude等模型中，这些文件甚至可以作为额外上下文提供，以帮助模型回答关于设定的细节问题或检查一致性。

完成以上更新后，相当于知识库已与剧情进度同步，下一章的准备工作就绪。然后进入下一章的循环。

3.6 下一章节：重复循环 – 按照3.1～3.5的步骤，继续生成下一章。每次循环都参考最新的背景设定、累计的剧情摘要和连续性笔记，并遵循大纲指引。如此迭代直至小说完结。

整个过程如同滚动雪球：设定文档 + 大纲提供宏观指导，章节梗概和记忆更新保证微观连贯，人工不时介入校正，从而实现长篇小说的持续生成。

4. 确保风格一致和情节不崩

长篇连载最怕风格断裂和剧情Bug。为此，需要在流程中持续应用以下规范：

始终提供风格指南： 无论多少章节，提示里都包含风格说明（可以简化为几句话放在系统信息里）。例如：“请用第三人称过去式记叙，语言风格幽默风趣，适当使用比喻，符合网络小说读者口味。” 模型每次生成都会受到此引导，风格就不易跑偏。同时，您也可以定期检查几章的语气是否一致。如果发现风格漂移（比如本应幽默风突然变严肃），可以在下次提示时强化相关要求，甚至把范文片段提供给模型学习模仿。

维护人物声音： 确保角色说话和行为符合设定。可以在人物档案里为主要角色各自列举说话习惯/口头禅，以及性格要点，并在生成对话场景时提醒模型参考。例如：“【性格】张三暴脾气，讲话直来直去，经常粗声抱怨。” 如果某角色在某章表现反常，可能需要调整档案或剧情解释其转变。总之，让模型牢记“人物即人设”，不要轻易改变角色塑造。

使用连续性检查： 前文提到的连续性笔记在每章写作前都要提供给模型，从而最大程度避免模型忘记某个事实。比如，如果上章出现了一个道具“神秘钥匙”，笔记中写了“神秘钥匙目前在主角手中，尚未使用”，模型下章就不会误写成钥匙丢了或不提钥匙。如果情节很复杂，可以在关键节点插入问答检查：让模型回答几个关于剧情的问题验证其“记忆”，例如“问：主角为什么需要那把神秘钥匙？答：…（模型回答）”。如果模型回答错了，说明需要在提示中加强该信息。

模型自检与辅助工具： 利用LLM本身来做一致性检查也是可行的。方法是在每章完成后，另开一个对话，让模型扮演编辑，询问：“请列出本章与之前章节可能不一致的地方。” 模型也许能检出一些隐患（如前后设定冲突）供您参考
medium.com
。另外，索引和术语表文件也能用于查漏补缺。例如读者（或您自己）突然想确认某角色上次出场是哪一章，可查索引
reddit.com
；怀疑某概念用法是否一致，可查术语表。这些都有助于及时发现并纠正错误。

必要时调整大纲： 正如人类作者在写作过程中会有新灵感从而调整后续情节，模型有时也会即兴引入新元素。如果这些即兴发挥导致剧情走向偏离预期，应该评估是接受这种变化还是纠正它。如果接受，就修改大纲纳入新思路；如果不接受，就在后续提示里明确约束模型回到原轨道，或者干脆在当前章节编辑掉这些多余情节，并告诉模型“不沿用这个情节”。保持大纲与实际文本同步更新，能避免越写越乱。
medium.com
提到的做法是在每章之后让AI回头更新大纲，这完全可以在您的工作流中实现——每写完一章就用模型重新产出“修订版剧情大纲”，这样确保模型对宏观走向的理解始终正确。

通过以上措施，能够最大程度上保证小说风格前后一致、情节合乎逻辑没有重大纰漏。即使出现矛盾，也可以通过修改笔记或让模型重写片段来修复，从而保持故事的内在完整性。

5. 项目管理与协作（使用Git仓库）

为了让连载小说的创作流程标准化、可持续，建议将整个项目托管在Git等版本控制系统上，用代码项目的方式管理文学创作。这带来几个好处：版本追踪、多人协作方便、内容结构清晰。以下是如何运用Git管理该流程：

仓库结构： 采用清晰的目录划分不同内容类型。例如：

novel-project/
├── background.md           # 世界背景设定
├── characters.md           # 人物设定
├── style-guide.md          # 写作风格指南
├── outline.md              # 小说整体大纲
├── continuity_notes.md     # 连续性笔记（持续更新的剧情重要信息）
├── glossary.md             # 术语表（可选）
├── index.md                # 人名地名索引（可选）
└── chapters/
    ├── chapter01.md        # 第一章正文
    ├── chapter02.md        # 第二章正文
    ├── ... 
    └── chapter20.md        # 第二十章正文（例如）


您可以根据需要增减文件，例如按卷拆分章节文件夹等。但尽量保持固定的文件命名和组织，以便脚本或协作者轻松引用。

版本控制策略： 每完成一个里程碑（如确定大纲、完成某章节），就commit一次。写作过程中如果对之前文件做了修改（比如更新了大纲或人物档案），也要commit说明改动。这样可以追踪“第X章写完后我们改动了哪些设定”。如果对故事进行重大改动（比如推倒重写某章节或改变结局走向），可考虑使用Git分支来尝试不同方案，确认后合并。版本控制提供了后悔药：万一模型胡写导致走偏，您可以方便地回滚到之前版本的故事大纲或文本。

协同创作： 如果有多位作者或您希望分享进度给编辑/朋友，Git方便进行Pull Request等协作。他人可以在支线分支上对文本润色、修改bug，然后合并。每次合并后，模型继续写作时要注意同步最新的设定和剧情文件。

自动化脚本： 您提到使用Claude Code等工具，这暗示可以通过编程来调用LLM生成内容并更新文件。确实可以编写脚本实现部分自动化：例如一个Python脚本按既定模板读取background.md等文件，构造prompt调用模型写章节，将结果保存为Markdown，然后调用Git命令提交。在脚本中还可以加入检查，例如diff比较新旧连续性笔记长度，超长则触发总结压缩。这种自动化能减少繁琐手动操作，但也需谨慎设置检查点，避免无人监督的模型输出错误内容直入仓库。

定期备份： 虽有版本库，但仍建议定期备份仓库，防止意外数据丢失（例如推送错误导致内容覆盖）。可以利用Git的remote功能将仓库推送到GitHub/GitLab等平台私有库，或在本地定时复制。

借助Git的分布式版本控制，您的小说创作就像开发软件一样井井有条：每一章、每一项设定变更都有记录，可追溯来源。在长达几个月甚至几年的连载过程中，这种严谨的管理能确保故事不会因为时间久远而遗忘前因后果，读者反馈的问题也能追踪回相应章节迅速修正。

实践中的高质量输出建议

综合以上流程，要实现高质量、连贯且风格统一的小说输出，最后汇总几点实践建议：

充分利用模型长处，规避短处： 模型擅长快速生成内容和从上下文“顺延”故事
promptengineering.org
。因此给它详尽的大纲和设定，它会保持连贯讲故事。但模型难点在于跨长距离记忆和自我审查，所以我们用短记忆提要+多轮提问来帮它记忆，并融入人工审校确保不犯低级错误。

多轮迭代，逐层精 Refinement： 不要期望模型一遍就产出完美章节。采用**“梗概→草稿→润色”**多阶段迭代，甚至分段生成。实践证明，逐层细化可提升内容质量
medium.com
。您可以先让模型写一个精简版草稿，再提示它“扩写细节”、“加入环境描写和心理活动”等等，逐步丰满章节内容。这样也降低了模型散漫跑题的概率。

保持灵活性： 虽然我们制定了详尽流程，但创作是动态的。随时根据实际效果调整流程细节。例如，如果发现每章先出梗概耗时太长，也可以尝试直接写正文再总结。但总体原则是不变的：保证模型始终在正确的轨道上运行，而不是放任其自由生成失控。

持续学习和调整提示： 随着对模型行为的了解，优化您的prompt模板。记下哪些提示措辞效果好，哪些容易引起废话或偏题。在Claude/ChatGPT等不同模型上试验，选择最适合小说创作的一个。正如一些作者更青睐某模型的文笔
reddit.com
，您也可以比较后决定主要用哪种。

最后，借助上述标准化工作流，您可以在保障质量的前提下，实现长篇小说的可持续生成。通过严谨的设定文档、清晰的大纲指导，结合每章的循环创作与检视，模型将扮演一个勤奋的“共同作者”，为您的故事添砖加瓦。同时，借助版本管理和记忆机制，您可以高效地掌控创作全局，确保故事情节前后一致、人物形象鲜明、风格始终如一。祝您的中文网文创作项目顺利，用AI写出引人入胜的长篇巨作！